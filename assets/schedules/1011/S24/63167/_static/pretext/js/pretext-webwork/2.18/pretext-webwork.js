function handleWW(t,e){const n=document.getElementById(t),o=n.dataset.domain,r=n.dataset.problemsource,s=n.dataset.sourcefilepath,a=n.dataset.courseid,c=n.dataset.userid,l=n.dataset.coursepassword,i=n.dataset.localizeCorrect||"Correct",d=n.dataset.localizeIncorrect||"Incorrect",p=n.dataset.localizeBlank||"Blank",u=n.dataset.localizeSubmit||"Submit",h=n.dataset.localizeCheckResponses||"Check Responses",m=n.dataset.localizeReveal||"Reveal",b=n.dataset.localizeRandomize||"Randomize",g=n.dataset.localizeReset||"Reset",f="undefined"!=typeof eBookConfig&&""!==eBookConfig.username,w=document.getElementById(t+"-button");e?"randomize"==e&&(n.dataset.current_seed=Number(n.dataset.current_seed)+100):(n.dataset.current_seed=n.dataset.seed,f&&(n.dataset.current_seed=webworkSeedHash(eBookConfig.username+n.dataset.current_seed)));let x=document.createElement("div");x.style.position="absolute",x.style.left=0,x.style.top=0,x.style.backgroundColor="rgba(0.2, 0.2, 0.2, 0.4)",x.style.color="white",x.style.width="100%",x.style.height="100%",x.style.display="flex",x.style.alignItems="center",x.style.justifyContent="center",x.tabIndex=-1;const y=document.createElement("span");let k;if(y.textContent="Loading",y.style.fontSize="2rem",x.appendChild(y),n.appendChild(x),x.focus(),e||(n.dataset.hasHint=n.getElementsByClassName("hint").length>0,n.dataset.hasSolution=n.getElementsByClassName("solution").length>0,n.dataset.hasAnswer=n.getElementsByClassName("answer").length>0,n.dataset.hintLabelText="true"==n.dataset.hasHint?n.querySelectorAll(".hint-knowl span.type, details.hint span.type")[0].textContent:"Hint",n.dataset.solutionLabelText="true"==n.dataset.hasSolution?n.querySelectorAll(".solution-knowl span.type, details.solution span.type")[0].textContent:"Solution",n.tabIndex=-1),"check"==e){const e=n.querySelector(".problem-iframe"),r=new FormData(e.contentDocument.getElementById(t+"-form")),s=new URLSearchParams(r);k=new URL(o+"/webwork2/html2xml?"+s.toString()),k.searchParams.append("answersSubmitted","1"),k.searchParams.append("WWsubmit","1")}else k=new URL(o+"/webwork2/html2xml"),k.searchParams.append("problemSeed",n.dataset.current_seed),r?k.searchParams.append("problemSource",r):s&&k.searchParams.append("sourceFilePath",s),k.searchParams.append("answersSubmitted","0"),k.searchParams.append("displayMode","MathJax"),k.searchParams.append("courseID",a),k.searchParams.append("userID",c),k.searchParams.append("course_password",l),k.searchParams.append("outputformat","raw"),k.searchParams.append("showSolutions","true"==n.dataset.hasSolution?"1":"0"),k.searchParams.append("showHints","true"==n.dataset.hasHint?"1":"0"),k.searchParams.append("problemUUID",t);$.getJSON(k.toString(),y=>{const k=document.createElement("form");k.id=t+"-form";const v=document.createElement("div");v.id=t+"-body",v.classList.add("exercise","exercise-like"),v.lang=y.lang,v.dir=y.dir,v.innerHTML=y.rh_result.text;for(const t of["h6","h5","h4","h3","h2","h1"]){const e=v.getElementsByTagName(t);for(heading of e){const t=document.createElement("h6");t.innerHTML=heading.innerHTML,cloneAttributes(t,heading),t.classList.add("webwork-part"),heading.replaceWith(t)}}if(adjustSrcHrefs(v,o),translateHintSol(t,v,o,"true"==n.dataset.hasHint,"true"==n.dataset.hasSolution,n.dataset.hintLabelText,n.dataset.solutionLabelText),f){const e=wwList[t.replace(/-ww-rs$/,"")].answers?wwList[t.replace(/-ww-rs$/,"")].answers:{answers:[],mqAnswers:[]},n=e.mqAnswers;for(const t in n){const e=v.querySelector("input[id="+t+"]");e&&""==e.value&&e.setAttribute("value",n[t])}const o=e.answers;for(const t in o){const e=v.querySelector("input[id="+t+"]");if(e&&""==e.value&&e.setAttribute("value",o[t]),e&&"RADIO"==e.type.toUpperCase()){const e=v.querySelectorAll("input[name="+t+"]");for(const n of e)n.value==o[t]&&n.setAttribute("checked","checked")}if(e&&"CHECKBOX"==e.type.toUpperCase()){const e=v.querySelectorAll("input[name="+t+"]");for(const n of e){let e=new RegExp("(\\[|, )"+n.value+"(, |\\])");o[t].match(e)&&n.setAttribute("checked","checked")}}if(v.querySelector("select[id="+t+"]")&&o[t]){let e=o[t];/^\\text\{.*\}$/.test(e)&&(e=e.match(/^\\text\{(.*)\}$/)[1]);let n=e.replace(/"/g,'\\"');const r=v.querySelector(`select[id="${t}"] option[value="${n}"]`);r&&r.setAttribute("selected","selected")}}}k.appendChild(v);const _={problemSeed:y.inputs_ref.problemSeed,problemUUID:y.inputs_ref.problemUUID,psvn:y.inputs_ref.psvn,courseName:a,courseID:a,userID:c,course_password:l,displayMode:"MathJax",session_key:y.rh_result.session_key,outputformat:"raw",language:y.formLanguage,showSummary:y.showSummary,showSolutions:"true"==n.dataset.hasSolution?"1":"0",showHints:"true"==n.dataset.hasHint?"1":"0",forcePortNumber:y.forcePortNumber};s?_.sourceFilePath=s:r&&(_.problemSource=r);for(const t of Object.keys(_)){const e=document.createElement("input");e.type="hidden",e.name=t,e.value=_[t],k.appendChild(e)}const C={};Object.keys(y.rh_result.answers).forEach(function(t){C[t]={}},y.rh_result.answers),"true"==n.dataset.hasAnswer&&Object.keys(y.rh_result.answers).forEach(function(t){C[t]={correct_ans:this[t].correct_ans,correct_ans_latex_string:this[t].correct_ans_latex_string,correct_choice:this[t].correct_choice,correct_choices:this[t].correct_choices}},y.rh_result.answers);let E=n.querySelector(".problem-buttons.webwork");if(E){if("true"==n.dataset.hasAnswer){const e=E.querySelector(".show-correct"),n=e.cloneNode(!0);n.addEventListener("click",()=>WWshowCorrect(t,C)),e.replaceWith(n)}}else{n.querySelector(".problem-buttons").classList.add("hidden-content"),null!=w&&w.classList.add("hidden-content"),E=document.createElement("div"),E.classList.add("problem-buttons","webwork"),null!=w?w.after(E):n.prepend(E);const e=document.createElement("button");e.type="button",e.id=t+"-check",e.style.marginRight="0.25rem",e.classList.add("webwork-button");v.querySelectorAll("input:not([type=hidden])").length,v.querySelectorAll("select:not([type=hidden])").length;if(e.textContent=f?u:h,e.addEventListener("click",()=>handleWW(t,"check")),E.appendChild(e),"true"==n.dataset.hasAnswer){const e=document.createElement("button");e.classList.add("show-correct","webwork-button"),e.type="button",e.style.marginRight="0.25rem",e.textContent=m,e.addEventListener("click",()=>WWshowCorrect(t,C)),E.appendChild(e)}const o=document.createElement("button");o.type="button",o.classList.add("webwork-button"),o.style.marginRight="0.25rem",o.textContent=b,o.addEventListener("click",()=>handleWW(t,"randomize")),E.appendChild(o);const r=document.createElement("button");r.type="button",r.classList.add("webwork-button"),r.textContent=g,r.addEventListener("click",()=>resetWW(t)),E.appendChild(r)}if("check"==e){$("body").trigger("runestone_ww_check",y);const e=v.querySelectorAll("input:not([type=hidden])");for(const n of e){const e=n.name;if("text"==n.type&&C[e]){const o=y.rh_result.answers[e].score;let r="",s="";o>=1?(r=i+"!",s="correct"):o>0&&o<1?(r=`${Math.round(100*o)}% ${i}.`,s="partly-correct"):""==y.rh_result.answers[e].student_ans?(r=p+".",s="blank"):o<=0&&(r=d+".",s="incorrect");let a=`<span class="${s}">${r}</span>`,c=y.rh_result.answers[e].ans_message?y.rh_result.answers[e].ans_message:"";n.classList.add(s),feedbackSpan=document.createElement("span"),feedbackSpan.id=`${t}-${e}-feedback`,feedbackHeadline=document.createElement("span"),feedbackHeadline.id=`${t}-${e}-headline`,feedbackHeadline.textContent=r,feedbackSpan.appendChild(feedbackHeadline),feedbackMessage=document.createElement("span"),feedbackMessage.id=`${t}-${e}-message`,feedbackMessage.textContent=c,feedbackSpan.appendChild(feedbackMessage);let l=document.createElement("span");l.classList.add("nobreak"),n.parentNode.insertBefore(l,n),l.appendChild(n);let u=document.createElement("span");u.classList.add("visually-hidden"),u.appendChild(feedbackSpan),l.appendChild(u),n.setAttribute("aria-describedby",`${t}-${e}-feedback`),u.after(createFeedbackButton(`${t}-${e}`,a,c))}if("RADIO"==n.type.toUpperCase()&&C[e]){const o=y.rh_result.answers[e].score,r=y.rh_result.answers[e].student_value||y.rh_result.answers[e].student_ans,s=y.rh_result.answers[e].correct_choice||y.rh_result.answers[e].correct_ans;if(n.value==r){1==o?n.parentNode.classList.add("correct"):n.parentNode.classList.add("incorrect");const a=createFeedbackButton(`${t}-${e}`,r==s?`<span class="correct">${i}</span>`:`<span class="incorrect">${d}.</span>`);a.style.marginRight="0.25rem",n.after(a)}}if("CHECKBOX"==n.type.toUpperCase()&&C[e]){const o=y.rh_result.answers[e].score,r=y.rh_result.answers[e].student_ans,s=y.rh_result.answers[e].correct_ans;if(n.value==y.rh_result.answers[e].firstElement){const a=n.parentNode.parentNode;1==o?a.classList.add("correct"):a.classList.add("incorrect");const c=createFeedbackButton(`${t}-${e}`,r==s?`<span class="correct">${i}</span>`:`<span class="incorrect">${d}.</span>`);a.insertBefore(c,a.firstChild)}}}const n=v.querySelectorAll("input[type=hidden]");for(const e of n){const n=e.name;if(!e.nextElementSibling)continue;const o=e.nextElementSibling.nextElementSibling;if(o&&C[n]&&o.classList.contains("graphtool-container")){o.style.position="relative";const e=y.rh_result.answers[n].score;let r="";if(1==e)r=`<span class="correct">${i}</span>`;else if(e>0&&e<1)r=`<span class="partly-correct">${Math.round(100*e)}% ${i}.</span>`;else{if(""==y.rh_result.answers[n].student_ans)continue;0==e&&(r=`<span class="incorrect">${d}.</span>`)}const s=createFeedbackButton(`${t}-${n}`,r,y.rh_result.answers[n].ans_message);s.style.position="absolute",s.style.left="100%",s.style.top=0,s.style.marginLeft="0.5rem",s.dataset.bsContainer="body",o.appendChild(s),1==e?o.classList.add("correct"):o.classList.add("incorrect")}}const o=v.querySelectorAll("select:not([type=hidden])");for(const e of o){const n=e.name;let o="";1==y.rh_result.answers[n].score?(headline=i+"!",correctClass="correct"):(headline=d+".",correctClass="incorrect"),e.classList.add(correctClass),o=`<span class="${correctClass}">${headline}</span>`,feedbackSpan=document.createElement("span"),feedbackSpan.id=`${t}-${n}-feedback`,feedbackHeadline=document.createElement("span"),feedbackHeadline.id=`${t}-${n}-headline`,feedbackHeadline.textContent=headline,feedbackSpan.appendChild(feedbackHeadline);let r=document.createElement("span");r.classList.add("nobreak"),e.parentNode.insertBefore(r,e),r.appendChild(e);let s=document.createElement("span");s.classList.add("select-wrapper",correctClass),e.parentNode.insertBefore(s,e),s.appendChild(e);let a=document.createElement("span");a.classList.add("visually-hidden"),a.appendChild(feedbackSpan),r.appendChild(a),e.setAttribute("aria-describedby",`${t}-${n}-feedback`),a.after(createFeedbackButton(`${t}-${n}`,o))}}let S='<!DOCTYPE html><head><script src="'+o+"/webwork2_files/node_modules/jquery/dist/jquery.min.js\"></script><script>window.MathJax = {\n\t\t\t  tex: {\n\t\t\t\tinlineMath: [['\\\\(','\\\\)']],\n\t\t\t\ttags: \"none\",\n\t\t\t\tuseLabelIds: true,\n\t\t\t\ttagSide: \"right\",\n\t\t\t\ttagIndent: \".8em\",\n\t\t\t\tpackages: {'[+]': ['base', 'extpfeil', 'ams', 'amscd', 'newcommand', 'knowl']}\n\t\t\t  },\n\t\t\t  options: {\n\t\t\t\tignoreHtmlClass: \"tex2jax_ignore\",\n\t\t\t\tprocessHtmlClass: \"has_am\",\n\t\t\t\trenderActions: {\n\t\t\t\t\tfindScript: [10, function (doc) {\n\t\t\t\t\t\tdocument.querySelectorAll('script[type^=\"math/tex\"]').forEach(function(node) {\n\t\t\t\t\t\t\tconst display = !!node.type.match(/; *mode=display/);\n\t\t\t\t\t\t\tconst math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);\n\t\t\t\t\t\t\tconst text = document.createTextNode('');\n\t\t\t\t\t\t\tnode.parentNode.replaceChild(text, node);\n\t\t\t\t\t\t\tmath.start = {node: text, delim: '', n: 0};\n\t\t\t\t\t\t\tmath.end = {node: text, delim: '', n: 0};\n\t\t\t\t\t\t\tdoc.math.push(math);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, '']\n\t\t\t\t},\n\t\t\t  },\n\t\t\t  chtml: {\n\t\t\t\tscale: 0.88,\n\t\t\t\tmtextInheritFont: true\n\t\t\t  },\n\t\t\t  loader: {\n\t\t\t\tload: ['input/asciimath', '[tex]/extpfeil', '[tex]/amscd', '[tex]/newcommand', '[pretext]/mathjaxknowl3.js'],\n\t\t\t\tpaths: {pretext: \"https://pretextbook.org/js/lib\"},\n\t\t\t  },\n\t\t\t};\n\t\t\t</script><script src=\""+o+'/webwork2_files/node_modules/mathjax/es5/tex-chtml.js" id="MathJax-script" defer></script><script src="https://pretextbook.org/js/lib/knowl.js" defer></script><link rel="stylesheet" href="'+o+'/webwork2_files/node_modules/bootstrap/dist/css/bootstrap.min.css"/><script src="'+o+'/webwork2_files/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js" defer></script>';const L=[],D=[];y.extra_css_files?y.extra_css_files.unshift(...L):y.extra_css_files=L;for(const t of y.extra_css_files)/knowl/.test(t.file)||(S+='<link rel="stylesheet" href="'+("1"!==t.external?o:"")+t.file+'"/>');y.extra_js_files?y.extra_js_files.unshift(...D):y.extra_js_files=D;for(const t of y.extra_js_files)/knowl/.test(t.file)||(S+='<script src="'+("1"!==t.external?o:"")+t.file+'" '+Object.keys(t.attributes||{}).reduce((e,n)=>e+=n+'="'+t.attributes[n]+'" ',"")+"></script>");let A;S+='<link rel="stylesheet" href="https://pretextbook.org/css/0.31/pretext_add_on.css"/><link rel="stylesheet" href="https://pretextbook.org/css/0.31/knowls_default.css"/><script src="'+o+"/webwork2_files/node_modules/iframe-resizer/js/iframeResizer.contentWindow.min.js\"></script><style>\n\t\t\thtml { overflow-y: hidden; }\n\t\t\thtml body { background:unset; margin: 0; }\n\t\t\tbody { font-size: initial; line-height: initial; padding:2px; }\n\t\t\t.hidden-content { display: none; }\n\t\t\tinput[type=\"text\"], input[type=\"radio\"], label, select {\n\t\t\t\theight: auto;\n\t\t\t\twidth: auto;\n\t\t\t\tmax-width: unset;\n\t\t\t\tmargin: 0;\n\t\t\t\tfont-size: initial;\n\t\t\t\t/*font-family: sans-serif;*/\n\t\t\t\tline-height: initial;\n\t\t\t}\n\t\t\tinput[type=\"text\"] {\n\t\t\t\tpadding: 1px;\n\t\t\t\tpadding-inline: 2px;\n\t\t\t\tborder-width: 1px;\n\t\t\t\tborder-style: inset;\n\t\t\t\tborder-color: rgb(133, 133, 133);\n\t\t\t\tborder-radius: 0;\n\t\t\t\tbox-shadow: unset;\n\t\t\t\ttransition: none;\n\t\t\t}\n\t\t\tinput[type=\"text\"]:focus, input[type=\"text\"]:active {\n\t\t\t\tbox-shadow: unset;\n\t\t\t\tborder-width: 1px;\n\t\t\t\tborder-style: inset;\n\t\t\t\tborder-radius: 4px;\n\t\t\t\tborder-color: rgb(133, 133, 133);\n\t\t\t\toutline: auto;\n\t\t\t}\n\t\t\tinput[type=\"radio\"] {\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tmargin-block: 3px 0;\n\t\t\t\tmargin-inline: 5px 3px;\n\t\t\t\tvertical-align: unset;\n\t\t\t}\n\t\tspan.nobreak {\n\t\t\twhite-space: nowrap;\n\t\t}\n\t\tinput[type=\"text\"].blank, input[type=\"text\"].correct, input[type=\"text\"].partly-correct, input[type=\"text\"].incorrect, select.correct, select.incorrect {\n\t\t\tbackground-size: auto 100%;\n\t\t\tbackground-position: right;\n\t\t\tbackground-repeat: no-repeat;\n\t\t\tpadding-right: 29px;\n\t\t}\n\t\tinput[type=\"text\"].blank {\n\t\t\tbackground-color: #CDF;\n\t\t\tbackground-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='20px' width='20px'><text x='19' y='16' fill='%230049DB' text-anchor='end'>\u26a0</text></svg>\");\n\t\t}\n\t\tinput[type=\"text\"].correct, select.correct, input[type=\"text\"].correct + span.mq-editable-field {\n\t\t\tbackground-color: #8F8;\n\t\t}\n\t\tinput[type=\"text\"].correct {\n\t\t\tbackground-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='20px' width='20px'><text x='19' y='16' fill='%23060' text-anchor='end'>\u2713</text></svg>\");\n\t\t}\n\t\t\tpadding-left: 2rem;\n\t\t\tbackground-repeat: no-repeat;\n\t\t\tbackground-position-y: center;\n\t\t}\n\t\tinput[type=\"text\"].partly-correct, input[type=\"text\"].partly-correct + span.mq-editable-field {\n\t\t\tbackground-color: #CDF;\n\t\t\tbackground-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='22px' width='30px'><text x='28' y='18' fill='%235C5C00' text-anchor='end'>\u26a0</text></svg>\");\n\t\t}\n\t\tinput[type=\"text\"].incorrect, select.incorrect, input[type=\"text\"].incorrect + span.mq-editable-field {\n\t\t\tbackground-color: #DAA;\n\t\t}\n\t\tinput[type=\"text\"].incorrect {\n\t\t\tbackground-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='22px' width='30px'><text x='28' y='18' fill='%23943D3D' text-anchor='end'>\u26a0</text></svg>\");\n\t\t}\n\t\tinput[type=\"text\"].partly-correct, input[type=\"text\"].incorrect {\n\t\t\tbackground-size: auto 70%;\n\t\t}\n\t\tlabel {\n\t\t\tpadding-left: 1.8em;\n\t\t}\n\t\tlabel.correct::before {\n\t\t\tcolor: #060;\n\t\t\tcontent: '\u2713';\n\t\t}\n\t\tlabel.incorrect::before {\n\t\t\tcolor: #943D3D;\n\t\t\tcontent: '\u26a0';\n\t\t\tfont-size: small;\n\t\t}\n\t\tlabel.correct::before, label.incorrect::before {\n\t\t\tdisplay:inline-block;\n\t\t\twidth: 0;\n\t\t\tdirection: rtl;\n\t\t}\n\t\t.select-wrapper.correct::before {\n\t\t\tcolor: #060;\n\t\t\tcontent: '\u2713';\n\t\t\tmargin-right: 2pt;\n\t\t}\n\t\t.select-wrapper.incorrect::before {\n\t\t\tcolor: #943D3D;\n\t\t\tcontent: '\u26a0';\n\t\t\tmargin-right: 2pt;\n\t\t\tfont-size: small;\n\t\t}\n\t\t.checkboxes-container.correct label input, .checkboxes-container.incorrect label input {\n\t\t\tborder-radius: 2px;\n\t\t\tappearance: none;\n\t\t\t-webkit-appearance: none;\n\t\t\t-moz-appearance: none;\n\t\t\twidth: 20px;\n\t\t\theight: 20px;\n\t\t\tcursor: pointer;\n\t\t\tposition: relative;\n\t\t\ttop: 5px;\n\t\t\tbackground-repeat: no-repeat;\n\t\t}\n\t\t.checkboxes-container.correct label input {\n\t\t\tbackground-color: #8F8;\n\t\t\tborder: #060 solid;\n\t\t}\n\t\t.checkboxes-container.correct label input:checked {\n\t\t\tbackground-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='14px' width='14px'><text x='13' y='13' text-anchor='end'>\u2713</text></svg>\");\n\t\t}\n\t\t.checkboxes-container.incorrect label input {\n\t\t\tbackground-color: #DAA;\n\t\t\tborder: #943D3D solid;\n\t\t}\n\t\t.checkboxes-container.incorrect label input:checked {\n\t\t\tbackground-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='14px' width='14px'><text x='13' y='13' text-anchor='end'>\u2718</text></svg>\");\n\t\t}\n\t\tdiv.PGML img.image-view-elt {\n\t\t\tmax-width:100%;\n\t\t}\n\n\t\t\tlabel {\n\t\t\t\tdisplay: inline-block;\n\t\t\t}\n\t\t\tselect {\n\t\t\t\tmargin: 0;\n\t\t\t\tborder-width: 1px;\n\t\t\t\tborder-style: inset;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tpadding-block: 1px;\n\t\t\t\tvertical-align: baseline;\n\t\t\t\tbackground-color: unset;\n\t\t\t\tpadding-inline: 0;\n\t\t\t}\n\t\t\t.result-popover .popover-header, .result-popover .popover-content {\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t\t.result-popover .popover-header.correct {\n\t\t\t\tbackground-color: #8F8;\n\t\t\t}\n\t\t\t.result-popover.nocontent .popover-header {\n\t\t\t\tborder-radius: calc(.3rem - 1px);\n\t\t\t}\n\t\t\t.result-popover.nocontent .popover-header::before {\n\t\t\t\tborder: none;\n\t\t\t}\n\t\t\t.accordion-body.expanded {\n\t\t\t\toverflow-y: visible;\n\t\t\t\toverflow-x: clip;\n\t\t\t}\n\t\t\t.graphtool-answer-container .graphtool-graph {\n\t\t\t\tmargin: 0;\n\t\t\t\twidth: 300px;\n\t\t\t\theight: 300px;\n\t\t\t}\n\t\t\t.graphtool-answer-container .graphtool-number-line {\n\t\t\t\theight: 57px;\n\t\t\t}\n\t\t\t.checkboxes-container .ww-feedback {\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 2px;\n\t\t\t}\n\t\t\t.graphtool-container.correct .graphtool-graph {\n\t\t\t\tbackground-color: #8F8;\n\t\t\t\tbackground-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='20px' width='20px'><text x='19' y='16' fill='%23060' text-anchor='end'>\u2713</text></svg>\");\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t}\n\t\t\t.graphtool-container.incorrect .graphtool-graph {\n\t\t\t\tbackground-color: #DAA;\n\t\t\t\tbackground-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='22px' width='30px'><text x='28' y='18' fill='%235C5C00' text-anchor='end'>\u26a0</text></svg>\");\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t}\n\t\t\t</style></head><body><main class=\"pretext-content\">"+k.outerHTML+"</main></body></html>",e?A=n.querySelector(".problem-iframe"):(A=document.createElement("iframe"),A.style.width="1px",A.style.minWidth="100%",A.classList.add("problem-iframe"),n.querySelector(".problem-contents").classList.add("hidden-content"),null!=w?w.after(A):n.prepend(A),iFrameResize({checkOrigin:!1,scrolling:"omit",heightCalculationMethod:"min"},A),A.addEventListener("load",()=>{A.contentDocument.getElementById(t+"-form").addEventListener("submit",e=>{handleWW(t,"check"),e.preventDefault()}),A.contentDocument.querySelectorAll(".collapse.in").forEach(t=>t.classList.add("expanded")),A.contentWindow.jQuery(".collapse").on("shown",function(t){t.target==this&&this.classList.add("expanded")}),A.contentWindow.jQuery(".collapse").on("hide",function(t){t.target==this&&this.classList.remove("expanded")}),A.contentDocument.querySelectorAll("button.ww-feedback[data-bs-content]").forEach(t=>{const e=new A.contentWindow.bootstrap.Popover(t,{html:!0,placement:"bottom",fallbackPlacements:[],trigger:"click",customClass:"result-popover"+(t.dataset.emptyContent?" nocontent":"")});e.show();const n=A.contentDocument.getElementById(t.id.replace("-feedback-button","-content")),o=n.parentNode.parentNode;e.hide(),t.addEventListener("click",()=>e.show(),{once:!0}),o.querySelector(".popover-arrow").remove();const r=o.querySelector(".popover-header");t.dataset.emptyContent&&n.parentNode.remove(),r.textContent==i+"!"&&r.classList.add("correct")}),A.contentWindow.MathJax.startup.promise.then(()=>A.contentWindow.MathJax.typesetPromise([".popover",".popover-content"]))})),A.srcdoc=S,A.addEventListener("load",()=>{x.remove()},{once:!0}),n.focus()})}function WWshowCorrect(t,e){const n=document.getElementById(t).querySelector(".problem-iframe"),o=n.contentDocument.getElementById(t+"-body");$("body").trigger("runestone_show_correct",{ww_id:t,answers:e});let r=o.querySelectorAll("input:not([type=hidden])");for(const o of r){const r=o.name,s=`${t}-${r}-correct`;if("text"==o.type&&e[r]&&!n.contentDocument.getElementById(s)){const a=o.id,c=n.contentDocument.getElementById(`mq-answer-${a}`);c&&(c.style.display="none");const l=n.contentDocument.getElementById(`${t}-${r}-feedback-button`);l&&(n.contentWindow.bootstrap.Popover.getInstance(l)?.hide(),l.remove()),label=n.contentDocument.getElementById(`${s}-label`),label&&(label.parentElement.insertBefore(o,label),label.remove()),o.type="hidden";const i=n.contentDocument.createElement("div");i.innerHTML=e[r].correct_ans,o.value=i.textContent;const d=n.contentDocument.createElement("span");d.id=s,d.appendChild(e[r].correct_ans_latex_string?n.contentDocument.createTextNode("\\("+e[r].correct_ans_latex_string+"\\)"):n.contentDocument.createTextNode(e[r].correct_ans)),o.parentElement.insertBefore(d,o)}if("RADIO"==o.type.toUpperCase()&&e[r]){const s=n.contentDocument.getElementById(`${t}-${r}-feedback-button`);s&&(n.contentWindow.bootstrap.Popover.getInstance(s)?.hide(),s.remove());const a=e[r].correct_choice||e[r].correct_ans;o.value==a?o.checked=!0:o.checked=!1}if("CHECKBOX"==o.type.toUpperCase()&&e[r]){e[r].correct_choices.includes(o.value)?o.checked=!0:o.checked=!1}}const s=o.querySelectorAll("input[type=hidden]");for(const o of s){const r=o.name;if(!o.nextElementSibling)continue;const s=o.nextElementSibling.nextElementSibling;if(s&&e[r]&&s.classList.contains("graphtool-container")){const a=n.contentDocument.getElementById(`${t}-${r}-feedback-button`);a&&(n.contentWindow.bootstrap.Popover.getInstance(a)?.hide(),a.remove());const c=n.contentDocument.createElement("div");o.parentElement.insertBefore(c,s),s.style.display="none",o.value=e[r].correct_ans,n.contentWindow.jQuery(c).html(e[r].correct_ans_latex_string);const l=n.contentDocument.createElement("script");l.textContent=c.querySelector("script").textContent.replace('\nwindow.addEventListener("DOMContentLoaded",',"(").replace(/;\n$/,"();"),n.contentDocument.body.appendChild(l)}}let a=o.querySelectorAll("select:not([type=hidden])");for(const o of a){const r=o.name,s=`${t}-${r}-correct`;if(e[r]&&!n.contentDocument.getElementById(s)){const a=n.contentDocument.getElementById(`${t}-${r}-feedback-button`);a&&(n.contentWindow.bootstrap.Popover.getInstance(a)?.hide(),a.remove()),o.style.display="none",o.value=e[r].correct_ans;const c=n.contentDocument.createElement("span");c.id=s,c.appendChild(e[r].correct_ans_latex_string?n.contentDocument.createTextNode("\\("+e[r].correct_ans_latex_string+"\\)"):n.contentDocument.createTextNode(e[r].correct_ans)),o.parentElement.insertBefore(c,o)}}const c=n.contentDocument.createElement("script");c.textContent="MathJax.startup.promise.then(() => MathJax.typesetPromise([document.body]));",n.contentDocument.body.appendChild(c)}function resetWW(t){const e=document.getElementById(t),n=document.getElementById(t+"-button");e.dataset.current_seed=e.dataset.seed,iframe=e.querySelector(".problem-iframe"),iframe.remove(),e.querySelector(".problem-contents").classList.remove("hidden-content"),e.querySelector(".problem-buttons.webwork").remove(),e.querySelector(".problem-buttons").classList.remove("hidden-content"),null!=n&&n.classList.remove("hidden-content")}function adjustSrcHrefs(t,e){t.querySelectorAll("[href]").forEach(t=>{const n=t.attributes.href.value;"#"===n||n.match(/^[a-z]+:\/\//i)||(t.href=e+"/"+n)}),t.querySelectorAll("[src]").forEach(t=>{t.src=new URL(t.attributes.src.value,e).href})}function translateHintSol(t,e,n,o,r,s,a){const c=e.querySelectorAll('.knowl[data-type="hint"],.knowl[data-type="solution"]');let l;for(const t of c){const e=t.parentNode;if(!e)continue;const c=e.parentNode,i=t.dataset.type;if(0==c.querySelectorAll(".webwork.solutions").length&&(l=document.createElement("div"),l.classList.add("webwork","solutions"),c.insertBefore(l,e)),"solution"==i&&!r||"hint"==i&&!o)continue;const d=document.createElement("details");d.classList.add(i),d.classList.add("solution-like"),d.classList.add("born-hidden-knowl");const p=document.createElement("summary"),u=document.createElement("span");u.classList.add("type"),u.innerHTML="hint"==i?s:a,p.appendChild(u),d.appendChild(p);const h=document.createElement("div");h.classList.add(i),h.classList.add("solution-like"),h.innerHTML=e.firstElementChild.dataset.knowlContents,d.appendChild(h),adjustSrcHrefs(h,n),l.appendChild(d)}for(const t of c)t.parentNode?.remove()}function cloneAttributes(t,e){[...e.attributes].forEach(e=>{t.setAttribute(e.nodeName,e.nodeValue)})}function createFeedbackButton(t,e,n){const o=document.createElement("button");o.dataset.bsTitle=e,o.dataset.bsContent=`<div id="${t}-content">${n||""}</div>`,n||(o.dataset.emptyContent="1");const r=document.createElement("span");return r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="none" stroke-width="2" viewBox="0 0 24 24" color="#000000"><path stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 11.5v5M12 7.51l.01-.011M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Z"></path></svg>',o.appendChild(r),o.type="button",o.classList.add("ww-feedback"),o.id=`${t}-feedback-button`,o.dataset.bsToggle="popover",o}function webworkSeedHash(t){var e,n=0;if(0===t.length)return n;for(e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return Math.abs(n)}